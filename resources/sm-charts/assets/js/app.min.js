/**
 * Stock Market Charts
 * ---------------------------------------------
 * Version 1.5.0, built on Tuesday, January 26, 2021
 * Copyright (c) Financial Apps and Plugins <info@financialplugins.com>. All rights reserved.
 * Demo: https://financialplugins.com/products/stock-market-charts
 * Purchase: https://1.envato.market/XVW64
 * Like: https://www.facebook.com/financialplugins/
 */
var smcPathToAssets=smcPathToAssets||"",smcGlobals={debug:!1,code:"smc",pluginUrl:smcPathToAssets+"/sm-charts/",ajaxUrl:smcPathToAssets+"/sm-charts/ajax.php",ajaxGetData:"ajaxGetData",ajaxSymbolAutocomplete:"ajaxSymbolAutocomplete",lang:"en",text:""},stockMarketChartsPlugin=function(e,a){function o(o,i,n,d,c,p){function u(e,a,o){return smcGlobals.ajaxUrl+"?action="+smcGlobals.ajaxGetData+"&symbol="+e+"&range="+a+"&interval="+o}function m(e){return smcGlobals.assetNamesOverrides&&smcGlobals.assetNamesOverrides[e]?smcGlobals.assetNamesOverrides[e]:e}function h(a){if(t("addComparison",a),"undefined"!=typeof v)if("search"===T)v.dataSets[0].title=m(a),v.dataSets[0].dataLoader.url=u(a,d,c),v.dataLoader.loadData();else if(g(),e.inArray(a,C)==-1)e.ajax({url:smcGlobals.ajaxUrl,method:"post",dataType:"json",data:{action:smcGlobals.ajaxGetData,symbol:a,range:d,interval:c}}).done(function(e){if(t("response",e),e.success){C.push(a);var o={title:smcGlobals.assetNamesOverrides&&smcGlobals.assetNamesOverrides[e.symbol]?smcGlobals.assetNamesOverrides[e.symbol]:e.symbol,assetSymbol:a,compared:!0,fieldMappings:[{fromField:"value",toField:"value"},{fromField:"volume",toField:"volume"}],dataProvider:e.data,categoryField:"time"};v.dataSets.push(o),v.comparedDataSets.push(o),v.validateData(),b()}else setTimeout(function(){b()},3e3)});else{for(var o=0;o<v.dataSets.length;o++)v.dataSets[o].assetSymbol==a&&(v.dataSets[o].compared=!0);v.validateData(),b()}}function f(e){t("deleteComparison",e);for(var a=0;a<v.dataSets.length;a++)v.dataSets[a].assetSymbol==e&&(v.dataSets[a].compared=!1);v.validateData()}function g(){}function b(){}function y(e,a){var o;if("candlestick"==a.type){var t=AmCharts.formatNumber(e.values.open,{precision:-1,decimalSeparator:p.decimalSeparator||".",thousandsSeparator:p.thousandsSeparator||","},p.precision||2),r=AmCharts.formatNumber(e.values.high,{precision:-1,decimalSeparator:p.decimalSeparator||".",thousandsSeparator:p.thousandsSeparator||","},p.precision||2),s=AmCharts.formatNumber(e.values.low,{precision:-1,decimalSeparator:p.decimalSeparator||".",thousandsSeparator:p.thousandsSeparator||","},p.precision||2),l=AmCharts.formatNumber(e.values.close,{precision:-1,decimalSeparator:p.decimalSeparator||".",thousandsSeparator:p.thousandsSeparator||","},p.precision||2);o='<div class="amcharts-tooltip"><div>'+a.title+"</div><table><tbody><tr><td>"+(smcGlobals.text.open||"Open")+":</td><td><b>"+t+"</b></td></tr><tr><td>"+(smcGlobals.text.high||"High")+":</td><td><b>"+r+"</b></td></tr><tr><td>"+(smcGlobals.text.low||"Low")+":</td><td><b>"+s+"</b></td></tr><tr><td>"+(smcGlobals.text.close||"Close")+":</td><td><b>"+l+"</b></td></tr></tbody></table></div>"}else{var i=AmCharts.formatNumber(e.values.value,{precision:-1,decimalSeparator:p.decimalSeparator||".",thousandsSeparator:p.thousandsSeparator||","},p.precision||2);o='<div class="amcharts-tooltip">'+a.title+": <b>"+i+"</b></div>"}return o}var v,C=[],S=n?n.split(","):[],x=e("#"+o),G=((new Date).getUTCHours(),(new Date).getUTCMinutes(),{"1D":{period:"mm",count:300},"1W":{period:"DD",count:7},"2W":{period:"DD",count:14},"1M":{period:"MM",count:1},"3M":{period:"MM",count:3},"6M":{period:"MM",count:6},YTD:{period:"YTD"},"1Y":{period:"YYYY",count:1},"2Y":{period:"YYYY",count:2},"5Y":{period:"YYYY",count:5},"10Y":{period:"YYYY",count:10},ALL:{period:"MAX"}}),T=p&&"undefined"!=typeof p.searchMode?p.searchMode:"comparison";for(var k in G)G.hasOwnProperty(k)&&("undefined"!=typeof smcGlobals.text.amCharts&&"undefined"!=typeof smcGlobals.text.amCharts.periods?G[k].label=smcGlobals.text.amCharts.periods[k]:G[k].label=k);p=p||{},t("chartSettings",i,d,c,p),x.css({width:p.width||"100%",height:p.height||"500px",fontSize:p.fontSize||14,color:p.color||"#383838",background:p.backgroundColor||"#fff"});var A="comparison"===T&&S.length?S.map(function(e){return'<option value="'+e+'" selected="selected">'+e+"</option>"}):"search"===T?'<option value="'+i+'" selected="selected">'+i+"</option>":"";x.prepend('<div class="'+s+'-chart-comparison"><select class="'+l+'"'+("comparison"===T?'" multiple="multiple"':"")+">"+A+'</select></div><div id="'+o+'-chart" class="'+s+'-chart"></div>');var M=x.find("."+l),L={type:"stock",language:smcGlobals.lang||"en",mouseWheelScrollEnabled:p.mouseWheelZoomEnabled||!1,categoryAxesSettings:{minPeriod:"mm",color:p.color||"#383838",gridColor:p.gridColor||"#e0e0e0",gridAlpha:p.gridAlpha||.8,gridThickness:"undefined"!=typeof p.gridThickness?p.gridThickness:1,groupToPeriods:["15mm","30mm","DD","WW","MM"],equalSpacing:!0,minHorizontalGap:100,autoGridCount:!0,dateFormats:[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"DD MMM"},{period:"WW",format:"DD MMM"},{period:"MM",format:"MMM YY"},{period:"YYYY",format:"YYYY"}]},dataSets:[{dataLoader:{url:u(i,d,c),format:"json",postProcess:function(e,a,o){return t("response",e),e.data}},title:m(i),fieldMappings:[{fromField:"value",toField:"value"},{fromField:"volume",toField:"volume"}],categoryField:"time"}],panelsSettings:{usePrefixes:p.usePrefixes||!1,fontSize:p.fontSize||14,marginTop:p.marginTop||0,marginRight:p.marginRight||10,marginBottom:p.marginBottom||0,marginLeft:p.marginLeft||10,backgroundColor:p.backgroundColor,backgroundAlpha:0,startDuration:0,thousandsSeparator:p.thousandsSeparator||",",decimalSeparator:p.decimalSeparator||".",precision:p.precision||2,percentPrecision:p.precision||2,creditsPosition:"bottom-left"},panels:[{showCategoryAxis:!0,title:p.primaryPanelTitle||"Price",percentHeight:"none"!=p.secondaryChartType?70:100,drawingIconsEnabled:!0,eraseAll:!0,stockGraphs:[{id:"mainGraph",type:p.primaryChartType||"smoothedLine",valueField:"value",lineColor:p.primaryLineColor||"#00842c",fillAlphas:p.primaryLineColorAlpha||.15,lineThickness:"undefined"!=typeof p.primaryLineThickness?p.primaryLineThickness:2,comparable:"comparison"===T,compareGraph:{type:p.primaryChartType&&"candlestick"!=p.primaryChartType?p.primaryChartType:"smoothedLine",fillAlphas:p.primaryLineColorAlpha||.15,lineThickness:"undefined"!=typeof p.primaryLineThickness?p.primaryLineThickness:2,balloonText:"[[title]]: <b>[[value]]</b>"},balloonFunction:y,compareGraphBalloonFunction:y,useDataSetColors:!1}],stockLegend:{enabled:"undefined"==typeof p.legendEnabled||p.legendEnabled,color:p.color||"#383838",fontSize:p.fontSize||14,backgroundColor:p.backgroundColor||"#fff",backgroundAlpha:0,useGraphSettings:!0,equalWidths:!1,valueWidth:150,valueText:"[[value]] ",valueTextRegular:"[[value]] ",valueTextComparing:"[[percents.value]]%",periodValueText:"[[value.close]]",periodValueTextRegular:"[[value.close]]",periodValueTextComparing:"[[percents.value.close]]%"},valueAxes:[{position:"right",color:p.color||"#383838",gridColor:p.gridColor||"#e0e0e0",gridAlpha:p.gridAlpha||.8,gridThickness:"undefined"!=typeof p.gridThickness?p.gridThickness:1}]},{title:p.secondaryPanelTitle||"Volume",percentHeight:"none"!=p.secondaryChartType?30:0,precision:0,stockGraphs:[{valueField:"volume",type:p.secondaryChartType||"column",showBalloon:!0,lineColor:p.secondaryLineColor||"#00842c",fillAlphas:p.secondaryLineColorAlpha||.15,lineThickness:"undefined"!=typeof p.secondaryLineThickness?p.secondaryLineThickness:1,balloonText:"[[title]]: <b>[[value]]</b>",useDataSetColors:!1,comparable:"comparison"===T,periodValue:"Sum",compareGraph:{type:p.secondaryChartType||"column",fillAlphas:p.secondaryLineColorAlpha||.15,lineThickness:"undefined"!=typeof p.secondaryLineThickness?p.secondaryLineThickness:1,balloonText:"[[title]]: <b>[[value]]</b>"}}],stockLegend:{color:p.color||"#383838",valueText:"[[value]]",valueTextRegular:"[[value]]",valueTextComparing:"[[percents.value]]%",periodValueText:"[[value.close]]",periodValueTextRegular:"[[value.close]]",periodValueTextComparing:"[[percents.value.close]]%"},valueAxes:[{position:"right",color:p.color||"#383838",gridColor:p.gridColor||"#e0e0e0",gridAlpha:p.gridAlpha||.8,gridThickness:"undefined"!=typeof p.gridThickness?p.gridThickness:1}]}],chartScrollbarSettings:{graph:"mainGraph",graphType:"smoothedLine",enabled:"undefined"==typeof p.scrollbarEnabled||p.scrollbarEnabled,color:p.color||"#383838",backgroundColor:p.scrollbarBackgroundColor||"#e8e8e8",backgroundAlpha:1,selectedBackgroundColor:p.scrollbarSelectedBackgroundColor||"#f7f7f7",selectedBackgroundAlpha:1,graphFillColor:p.scrollbarGraphFillColor||"#004c19",graphFillAlpha:1,selectedGraphFillColor:p.scrollbarSelectedGraphFillColor||"#00aa38",selectedGraphFillAlpha:1,gridColor:p.gridColor||"#e0e0e0",gridAlpha:p.gridAlpha||.8,gridThickness:"undefined"!=typeof p.gridThickness?p.gridThickness:1},chartCursorSettings:{enabled:"undefined"==typeof p.cursorEnabled||p.cursorEnabled,cursorColor:p.cursorColor||"#ba0000",cursorAlpha:p.cursorAlpha||.8,valueLineAlpha:p.cursorAlpha||.8,valueBalloonsEnabled:!0,graphBulletSize:1,valueLineBalloonEnabled:!0,valueLineEnabled:!0,categoryBalloonColor:p.cursorColor||"#ba0000",categoryBalloonAlpha:p.cursorAlpha||.8},periodSelector:{position:"top",periodsText:"",inputFieldsEnabled:!1,periods:[]},dataSetSelector:{position:""},comparedDataSets:[],"export":{enabled:"undefined"==typeof p.exportEnabled||p.exportEnabled,position:"top-right"},listeners:[{event:"init",method:function(){T!==!1&&M.show().stockMarketChartsPlugin().initAssetAutocomplete()}}]};"candlestick"==p.primaryChartType&&(L.panels[0].stockGraphs[0].openField="open",L.panels[0].stockGraphs[0].lowField="low",L.panels[0].stockGraphs[0].highField="high",L.panels[0].stockGraphs[0].closeField="value",L.panels[0].stockGraphs[0].proCandlesticks=!0,L.dataSets[0].fieldMappings.push({fromField:"open",toField:"open"}),L.dataSets[0].fieldMappings.push({fromField:"low",toField:"low"}),L.dataSets[0].fieldMappings.push({fromField:"high",toField:"high"}));for(var Y="undefined"!=typeof p.periods?p.periods.split(","):["1W","1M","6M","1Y","ALL"],F=p.defaultPeriod||"1M",D=0;D<Y.length;D++){var w=Y[D];"undefined"!=typeof G[w]&&(L.periodSelector.periods[D]=G[w],w==F?L.periodSelector.periods[D].selected=!0:L.periodSelector.periods[D].selected=!1)}if(v=a.makeChart(o+"-chart",L),T!==!1&&M.on("change",function(){var a=e(this),o=a.val();if("search"===T)h(o);else if(o){var t=r(S,o),s=r(o,S);t.length&&f(t[0]),s.length&&h(s[0]),S=o}else{for(var l=0;l<S.length;l++)f(S[l]);S=[]}}),S.length)for(var D=0;D<S.length;D++)h(S[D])}function t(){smcGlobals.debug&&console.log("SMC",arguments)}function r(e,a){return a?e.filter(function(e){return a.indexOf(e)<0}):[]}t("smcGlobals",smcGlobals);var s=smcGlobals.code,l=s+"-asset-autocomplete";return"undefined"!=typeof smcGlobals.lang&&"undefined"!=typeof smcGlobals.text.amCharts&&"undefined"!=typeof smcGlobals.text.amCharts["export"]&&(a.translations["export"][smcGlobals.lang]=smcGlobals.text.amCharts["export"]),"undefined"!=typeof smcGlobals.lang&&"undefined"!=typeof smcGlobals.text.amCharts&&"undefined"!=typeof smcGlobals.text.amCharts.dataLoader&&(a.translations.dataLoader[smcGlobals.lang]=smcGlobals.text.amCharts.dataLoader),e.fn.stockMarketChartsPlugin=function(){var a=this,o=e(this);return{initAssetAutocomplete:function(){return a.select2({allowClear:!!o.attr("multiple"),placeholder:"undefined"!=typeof smcGlobals.text.select2?smcGlobals.text.select2.placeholder:"Symbol or asset name",containerCssClass:s+"-select2-container",dropdownCssClass:s+"-select2-dropdown",ajax:{url:smcGlobals.ajaxUrl,dataType:"json",delay:250,data:function(e){return{action:smcGlobals.ajaxSymbolAutocomplete,q:e.term}},processResults:function(e,a){return a.page=a.page||1,{results:e}},cache:!0},language:{noResults:function(){return"undefined"!=typeof smcGlobals.text.select2?smcGlobals.text.select2.search_not_found:"No results found"},errorLoading:function(){return"undefined"!=typeof smcGlobals.text.select2?smcGlobals.text.select2.search_error:"There was an error, please try again."},inputTooShort:function(){return"undefined"!=typeof smcGlobals.text.select2?smcGlobals.text.select2.search_short:"Enter at least 2 characters"},searching:function(){return"undefined"!=typeof smcGlobals.text.select2?smcGlobals.text.select2.searching:"Searching..."}},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:function(e){return e.loading?e.name:'<div class="smc-symbol-search-row">  <span class="smc-symbol-search-symbol">'+e.id+'</span>  <span class="smc-symbol-search-exch">'+e["class"]+" - "+e.exchange+"</span></div><div>"+e.name+"</div>"},templateSelection:function(e){return e.id}})}}},{buildChart:o,log:t}}(jQuery,AmCharts);